<html>

<body>
    <input type="file" id="fileButton" />
    <progress value="0" max="100" id="uploader">0%</progress>
    <div id="linkbox"></div>
    <script src="https://www.gstatic.com/firebasejs/3.7.0/firebase.js"></script>
    <script>
        // Initialize Firebase
        var config = {

            apiKey: "AIzaSyC-pMGLqJZUEvexMM2pFiIuyGW4zbjH6Kk",
            authDomain: "lavanya-beauty-clinic-website.firebaseapp.com",
            databaseURL: "https://lavanya-beauty-clinic-website.firebaseio.com",
            projectId: "lavanya-beauty-clinic-website",
            storageBucket: "lavanya-beauty-clinic-website.appspot.com",
            messagingSenderId: "613959501953"
        };
        firebase.initializeApp(config);
    </script>
    <script>
        var fileButton = document.getElementById("fileButton");
        fileButton.addEventListener('change', function (e) {
            var file = e.target.files[0];
            var storageRef = firebase.storage().ref(file.name);
            var metadata = {
                contentType: 'image/jpeg',
            };



            // console.log('file + ' + file.name);
            // var task = storageRef.put(file);
            // console.log("Upload complete");


            storageRef.child('images/' + file.name).put(file, metadata).then(function (snapshot) {
                console.log('Uploaded', snapshot.totalBytes, 'bytes.');
                console.log(snapshot.metadata);
                var url = snapshot.downloadURL;
                console.log('File available at', url)
                // [START_EXCLUDE]
                document.getElementById('linkbox').innerHTML = '<a href="' + url + '">Click For File</a>';
                // [END_EXCLUDE]
            }).catch(function (error) {
                // [START onfailure]
                console.error('Upload failed:', error);
                // [END onfailure]
            });
            // [END oncomplete]
        });




        console.log("Hello");

        // task.on('state_changed',
        //     function progress(snapshot) {
        //         var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
        //         uploader.value = percentage;

        //     },
        //     function error(err) {
        //         console.log(err);
        //     },
        //     function complete() {
        //         alert("Upload process complete. Beginigng retrieval of URL");
        //         var fileName = window.AppInventor.getWebViewString();
        //         var storage = firebase.storage();
        //         var pathReference = storage.ref(fileName);
        //         console.log(pathReference.getDownloadURL());
        //         pathReference.getDownloadURL().then(function (url) {
        //             window.AppInventor.setWebViewString(url);
        //         });
        //         console.log("Retrieval of URL complete");
        //         alert("Upload totally complete");
        //     }

        // );
        // };





    </script>
</body>

</html>